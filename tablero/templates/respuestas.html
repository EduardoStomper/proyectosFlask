{% extends "base.html" %}

{% block title %}Panel Respuestas - {{ team_name }} - {{ super() }}{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-6 max-w-md">
    <!-- Header del Equipo -->
    <div class="bg-{{ team_color }}-600 text-white rounded-lg p-4 mb-6 text-center">
        <h1 class="text-2xl font-bold">
            {% if team_color == 'blue' %}üîµ{% else %}üî¥{% endif %} {{ team_name }}
        </h1>
        <p class="text-{{ team_color }}-100 mt-1">Panel de Respuestas</p>
    </div>
    
    <!-- Estado de Conexi√≥n -->
    <div id="connection-status" class="bg-green-100 border border-green-400 text-green-700 px-4 py-2 rounded-lg mb-4 text-sm text-center hidden">
        üü¢ Conectado al servidor
    </div>
    
    <!-- Estado de la Pregunta -->
    <div class="bg-white rounded-lg p-4 mb-6 shadow-md">
        <h2 class="text-lg font-semibold mb-3 text-gray-800">Estado Actual</h2>
        <div id="current-question-status" class="text-center text-gray-600">
            <div class="text-4xl mb-2">‚è≥</div>
            <p>Esperando pregunta del moderador...</p>
        </div>
        <div id="team-eligibility" class="hidden mt-3 p-3 rounded-lg text-center text-sm font-medium">
            <!-- Informaci√≥n sobre si el equipo puede responder -->
        </div>
    </div>
    
    <!-- Pregunta Actual -->
    <div id="question-card" class="hidden bg-white rounded-lg p-6 mb-6 shadow-lg">
        <div class="text-center">
            <div id="question-category" class="text-sm font-medium text-{{ team_color }}-600 bg-{{ team_color }}-100 px-3 py-1 rounded-full inline-block mb-3">
                Categor√≠a
            </div>
            <h3 id="question-text" class="text-xl font-bold text-gray-800 mb-4 leading-tight">
                Pregunta aparecer√° aqu√≠
            </h3>
            <div id="question-difficulty" class="text-sm text-gray-600">
                Dificultad: <span id="difficulty-level">1</span>/5
            </div>
        </div>
    </div>
    
    <!-- Opciones de Respuesta -->
    <div id="answer-section" class="hidden">
        <div class="bg-white rounded-lg p-4 mb-6 shadow-md">
            <h2 class="text-lg font-semibold mb-4 text-gray-800 text-center">Selecciona tu respuesta</h2>
            <div id="answer-options" class="space-y-3">
                <!-- Las opciones se generar√°n din√°micamente -->
            </div>
        </div>
        
        <!-- Bot√≥n de Confirmar -->
        <div id="confirm-section" class="hidden">
            <div class="bg-gray-50 rounded-lg p-4 mb-4">
                <p class="text-center text-gray-700 mb-3">
                    <strong>Respuesta seleccionada:</strong>
                </p>
                <p id="selected-answer-display" class="text-center text-lg font-bold text-{{ team_color }}-600 mb-4">
                    <!-- Respuesta seleccionada -->
                </p>
                <div class="flex space-x-3">
                    <button onclick="cancelAnswer()" 
                            class="flex-1 bg-gray-500 hover:bg-gray-600 text-white py-3 rounded-lg font-medium transition-all duration-300">
                        Cancelar
                    </button>
                    <button onclick="submitAnswer()" 
                            id="submit-btn"
                            class="flex-1 bg-{{ team_color }}-600 hover:bg-{{ team_color }}-700 text-white py-3 rounded-lg font-medium transition-all duration-300 transform hover:scale-105">
                        ‚úÖ Confirmar Respuesta
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Resultado de la Respuesta -->
    <div id="answer-result" class="hidden">
        <div id="result-card" class="rounded-lg p-6 text-center text-white shadow-lg mb-4">
            <!-- Contenido din√°mico del resultado -->
        </div>
        <button onclick="resetForNextQuestion()" 
                class="w-full bg-gray-600 hover:bg-gray-700 text-white py-3 rounded-lg font-medium transition-all duration-300">
            Listo para pr√≥xima pregunta
        </button>
    </div>
    
    <!-- Estad√≠sticas del Equipo -->
    <div class="bg-white rounded-lg p-4 shadow-md">
        <h2 class="text-lg font-semibold mb-3 text-gray-800 text-center">Estad√≠sticas</h2>
        <div class="grid grid-cols-3 gap-3 text-center">
            <div>
                <div id="team-score" class="text-2xl font-bold text-{{ team_color }}-600">0</div>
                <div class="text-xs text-gray-500">Puntos</div>
            </div>
            <div>
                <div id="correct-answers" class="text-2xl font-bold text-green-600">0</div>
                <div class="text-xs text-gray-500">Correctas</div>
            </div>
            <div>
                <div id="wrong-answers" class="text-2xl font-bold text-red-600">0</div>
                <div class="text-xs text-gray-500">Incorrectas</div>
            </div>
        </div>
    </div>
    
    <!-- Enlaces de Navegaci√≥n -->
    <div class="mt-6 bg-gray-50 rounded-lg p-4">
        <h3 class="text-sm font-semibold text-gray-700 mb-3 text-center">Otras Pantallas</h3>
        <div class="space-y-2">
            <a href="/tablero" target="_blank" 
               class="block w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg text-center text-sm font-medium transition-all duration-300">
                üñ•Ô∏è Ver Tablero Principal
            </a>
            <a href="/marcador" target="_blank" 
               class="block w-full bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-lg text-center text-sm font-medium transition-all duration-300">
                üèÜ Ver Marcador
            </a>
        </div>
    </div>
</div>

<!-- Modal de Respuesta Correcta -->
<div id="correct-answer-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
    <div class="bg-white rounded-2xl p-6 max-w-sm mx-4">
        <div class="text-center">
            <div class="text-4xl mb-3">‚úÖ</div>
            <h3 class="text-xl font-bold text-green-600 mb-2">Respuesta Correcta</h3>
            <p id="correct-answer-text" class="text-gray-700 mb-4">
                <!-- Respuesta correcta -->
            </p>
            <button onclick="closeCorrectAnswerModal()" 
                    class="bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded-lg font-medium transition-all duration-300">
                Entendido
            </button>
        </div>
    </div>
</div>

<!-- Efectos de Celebraci√≥n -->
<div id="celebration" class="fixed inset-0 pointer-events-none z-40 hidden">
    <!-- Confeti para respuestas correctas -->
</div>
{% endblock %}

{% block scripts %}
<script>
    // Pasar datos del equipo desde el servidor
    const TEAM_ID = '{{ team_id }}';
    const TEAM_NAME = '{{ team_name }}';
    const TEAM_COLOR = '{{ team_color }}';
</script>
<script src="/static/js/respuestas.js"></script>
{% endblock %}